「プラトレ」説明テキストファイル


【確認OS】
・Widows10 バージョン20H2

【確認グラフィックハードウェア】
・GEFORCE GTX 16 SERIES
・NVIDIA GetForce RTX

【開発環境】
・Visual Studio 2017
・Adobe Photoshop 2022
・Maya 2020
・Mixamo
・Blender

・制作箇所
制作したプログラムや関数はM.Sのコメントがついています

FbxSkinMesh.hlsli
FbxStaticMesh.hlsli
トゥーンレンダリングを追加、変更

BackFore.cpp
星動的生成画面、星の架け橋をかける画面、線路配置ゲーム画面の画像表示処理
移動距離ゲージと必要乗車人数の表示処理
選択線路の表示かつ、その線路が配置可能か確認できるの画像表示
星の架け橋画面のセーブ効果音の発生
乗車人数が満たされた時のキラキラアニメーション表示処理
数字を1桁ずつ分けて配列に入れて、桁数を出す処理
【特に力を入れている箇所】
431～476 DrawArrowLine()線路の配置可能表示
556～608 VariableAnalysis,VariableAnalysisChangeNum 数字を一桁ずつに分けて保存する(画像から数字を表示する際に使用しています)
612～631 DrawGlitterGauge ゲージのキラキラ表示処理(アニメーションをさせています)

BackFore.h
BackFore.cppの処理実装用変数の宣言
BackFore.cppの処理実装用関数の宣言

camera.cpp
シーンに合わせたカメラ位置の設定
線路配置画面の二画面目の上方位置などの設定
【特に力を入れている箇所】
106～144 カメラ変更数字によってカメラ位置の調整をし、
         プレイキャラの位置によって上方位置の設定
camera.h
シーンに合わせたカメラ位置変数

Effect.cpp
エフェクトの表示サイズ、位置の設定
アニメーションを止めて描画させる
【特に力を入れている箇所】
531～543 アクティブになっている線路キラキラエフェクトのオブジェクトポインタから
         Updateを呼びだしている(2画面表示の時)
695～705 呼びだしたUpdateでアニメーションを止めてレンダリングさせている(2画面表示の時)

Effect.h
星生成エフェクトクラス
線路キラキラエフェクトのオブジェクトポインタのゲッター

Enemy.cpp(人キャラのスクリプト)
各クラスの初期化処理
配置する位置を排出する処理
新しい正面のマップ面に人キャラを配置する処理
配置位置でプレイヤーが詰まないようにする処理
配置した人キャラの挙動処理
プレイキャラと同じ面にいた時、配置した人キャラがプレイキャラを見る処理
乗車処理
【特に力を入れている箇所】
536～589 人キャラがプレイキャラの方を向く処理
661～683 乗車処理

Enemy.h
Enemy.cppでの処理実装のために各人キャラクラスの変数と関数の宣言

GameMain.cpp
BGM、SEの読み込み
ファイルの読み込み処理
ファイルの書き込み処理
読み込んだファイルにセーブデータがあるかどうか見る処理
読み込んだ数字をオプション画面で使用する数字に変更する処理
タイトルBGMの再生処理
BGMとSEのボリュームの設定処理
読み込んだファイルからBGMとSEのボリューム設定をする処理
2画面の描画処理(2画面目のビューポート設定をしてマップの描画、
アニメーションを止めたエフェクトや人キャラの描画)
【特に力を入れている箇所】
336 二画面表示のビューポート設定
346～354 乗車していない人キャラのアニメーションを止めた描画処理
453～483 外部ファイルへセーブデータとランキングスコアを出力する処理
487～506 外部ファイルのセーブデータとランキングスコアを読み込む処理

GameMain.h
GameMain.cppでの処理実装のための変数と関数の宣言

Map.cpp
星の動的生成の処理
初期化処理
星の生成エフェクトの追加、エフェクトに合わせた星の表示処理
各配置オブジェクト(線路、駅)クラス
各面に配置する面の数字確認用BBox、面の回転確認用BBox
BBox位置設定
線路配置ゲームのプレイキャラの初期位置の設定、スタート位置オブジェの配置
星の架け橋画面での合計乗車人数や行った星の数の更新、セーブ処理
最後の星だった場合のクリア処理
星の架け橋をかける処理
プレイヤーが配置するオブジェクト(線路、駅)の処理
星の回転処理
回転に合わせて配置オブジェクトを動かす処理
マップ配列記録処理、読み込み関数処理
現在の正面(操作可能面)マップを調べる処理
次の面へ配置する処理
線路を配置できるか判断する処理
線路のキラキラエフェクトの表示処理
面の回転、選択線路に合わせたカーソルガイドの表示処理
線路、駅のレンダリング処理
【特に力を入れている箇所】
26～190 RandomNumMeth,DecideDirection,outStartNum,MapDynamic 星の動的生成(穴掘り法)
503     軽量化のためにプロシージャーにメッシュを持たせて、オブジェクト配列ではそのアドレスを指して使用する
1798～1835 生成した星の表示エフェクトのフェーズ処理、星を移動させてエフェクトが終わるタイミングで見える位置に持ってくる処理
           星が発生していた時は動的生成した星の配列確認の処理を止めて、発生していない時は進める処理
1875～1900 星の架け橋を徐々に光らせるための処理とセーブ処理
1921～1947 星を回転させる時のドラッグアンドドロップの開始座標と終了座標の差を計算し、
           その差の絶対値からX軸かY軸のどちらに移動させるか判断し、差の値から-か+のどちらに移動させるかを判断する処理
1950～1993 星の回転処理
           前の回転に-をかけたマトリックスを星にかけて位置を戻してから、星マに新しいマトリックスをかけて回転させる処理
           配置オブジェクトの回転処理
2019～2032 軽量化のための線路キラキラエフェクト発生処理。配置している直線線路(縦)が正面(線路を配置するマップ面)にあるか、
           または、プレイキャラがいる面で直線線路(縦)がプレイキャラから一定距離以内にある場合、エフェクトを発生させている。
2083～2163 線路配置のガイドカーソルが範囲内にあった場合、線路の種類と回転に合わせて表示を変更する
2427       マップ配列の保存
2428       マップ配列の更新

Map.h
Map.cppの処理実装用関数の宣言
Map.cppの処理実装用変数の宣言
【特に力を入れている箇所】
384～409 線路の基底クラス
413～438 線路の規定クラスを継承したクラス(直線線路の縦)

Playchar.cpp
初期化処理
プレイキャラが出発するまでの待機処理
乗車処理中などの進まない時の処理
プレイキャラがいる位置を調べる処理
プレイキャラがいる面のマップ配列記録処理、読み込み処理
各移動処理
ゲームオーバー判定の処理
マップ面の端にプレイキャラがいた時の次の面への移動処理
現在地の更新処理
ゲームオーバー時のアニメーションフェーズやタイムカウント処理
【特に力を入れている箇所】
472～531    JudgeAbsoluteSize キャラの上がどこの軸を向いているのかを調べる処理
1033～1102  JudgeNowPcMap     キャラがいる面の数字や位置を調べる処理
1657～1697  方向切り替え線路で上方向に進み、右へ進む処理
2783～2803  プレイキャラが端にいた場合に次の面へ移動する処理

Playchar.h
Playchar.cppの処理実装用変数の宣言
Playchar.cppの処理実装用関数の宣言

Title.cpp
初期化処理
各画面(ゲームクリア画面や、タイトル画面など)の表示フェーズ処理
オプション画面での選択数字⇔プログラムで使用する数字の変換処理
セーブデータの注意表示処理
タイトル画面での各ボタンの表示、選択処理
オプション画面での各ボタンの表示、選択処理
操作説明画面での各ページの表示、ページ選択処理
各モードのスコアの計算、表示処理
ランキングの更新、表示処理
ゲームクリア時のゲームクリア画面、リザルト画面、ランキング画面を順に表示していく処理
タイムカウント処理
各BGM処理
ランキングや、セーブデータ初期化のファイル書き込み処理
ゲームクリア、ゲームオーバー、ランキング確認画面の時の1画面表示に変更する処理
ランキング確認画面処理
【特に力を入れている箇所】
1298～1367 各順位のスコアを画像から表示し、その順位のスコアが自分のスコアの場合は点滅して表示する処理
1374～1451 GameClear モードに合わせたゲームクリアの処理
925～969   オプションボタンの選択処理と、設定する項目のオプションとは別の項目(行)のオプションに反応させない処理
587～627   タイトル画面でセーブデータの注意表示をしたり、次のフェーズ(ゲーム開始など)に進める処理

Title.h
Title.cppの処理実装用変数の宣言
Title.cppの処理実装用関数の宣言

Direct3D.cpp
画面分割変更(2画面表示)のためのビューポートをセットする処理
【特に力を入れている箇所】
46～70 SetViewPortビューポート設定の処理

Direct3D.h
Direct3D.cppの処理実装用関数の宣言

授業の中で配布された学校の共通ライブラリを使用しています。